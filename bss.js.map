{"version":3,"file":"bss.js","sources":["lib/utils.js","lib/sheet.js","lib/index.js","lib/popular.js","lib/keyframes.js","lib/pseudos.js"],"sourcesContent":["import popular from './popular'\n\nconst shorts = Object.create(null)\n\nexport const cssProperties = Object.keys(\n  findWidth(document.documentElement.style)\n).filter(prop => typeof document.documentElement.style[prop] === 'string')\n\nfunction findWidth(obj) {\n  return obj.hasOwnProperty('width')\n    ? obj\n    : findWidth(Object.getPrototypeOf(obj))\n}\n\nexport const vendorMap = Object.create(null, {})\n\nexport const vendorRegex = /^(o|O|ms|MS|Ms|moz|Moz|webkit|Webkit|WebKit)([A-Z])/\n\nconst edge = window.navigator.userAgent.indexOf('Edge') > -1\n\nfunction endsWith(str, suffix) {\n  return str.indexOf(suffix, str.length - suffix.length) > -1\n}\n\nexport function parse(input, value) {\n  if (typeof input === 'string') {\n    if (typeof value === 'string' || typeof value === 'number')\n      return ({ [input] : value })\n\n    return stringToObject(input)\n  } else if (Array.isArray(input) && Array.isArray(input.raw)) {\n    arguments[0] = { raw: input }\n    return stringToObject(String.raw.apply(null, arguments))\n  } else if (typeof input === 'object') {\n    return input.style || input\n  }\n}\n\nexport function addProperty(obj, key, value) {\n  if (!value && value !== 0)\n    return\n\n  obj[key] = addPx(key, value)\n}\n\n// Figure out recognizing shorthands (eg gridGap)\nconst pxProperties = (function() {\n  const el = document.createElement('div')\n\n  return cssProperties.filter(prop => {\n    try {\n      el.style[prop] = '1px'\n      el.style.setProperty(prop, '1px')\n    } catch (err) {\n      return\n    }\n\n    return endsWith(!edge && el.style[prop] || el.style.getPropertyValue(prop), 'px')\n  }).concat('gridGap')\n}())\n\nexport function lowercaseFirst(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1)\n}\n\nexport function assign(obj, obj2) {\n  for (const key in obj2) {\n    if (obj2.hasOwnProperty(key))\n      obj[key] = obj2[key]\n  }\n}\n\nexport function hyphenToCamelCase(hyphen) {\n  return hyphen.replace(/-([a-z])/g, function(match) {\n    return match[1].toUpperCase()\n  })\n}\n\nexport function camelCaseToHyphen(camelCase) {\n  return camelCase.replace(/([A-Z])/g, '-$1').toLowerCase()\n}\n\nexport function initials(camelCase) {\n  return camelCase.charAt(0) + (camelCase.match(/([A-Z])/g) || []).join('').toLowerCase()\n}\n\nexport function short(prop) {\n  const acronym = initials(prop)\n      , short = popular[acronym] && popular[acronym] !== prop ? prop : acronym\n\n  shorts[short] = prop\n  return short\n}\n\nexport function getStyleSheetText(classes) {\n  return Object.keys(classes).sort().map(key => {\n    return key.replace(/CLASS_NAME/g, classes[key])\n  }).join('')\n}\n\nexport function objectToCss(style) {\n  const atRules = []\n      , nested = []\n\n  let notEmpty = false\n\n  Object.keys(style).forEach(item => {\n    if (item.charAt(0) === '@') {\n      atRules.push([item, style[item]])\n      delete style[item]\n    } else if (item.charAt(0) === ' ' || item.charAt(0) === ':') {\n      nested.push([item, style[item]])\n      delete style[item]\n    } else {\n      notEmpty = true\n    }\n  })\n\n  return (notEmpty ? selectorToStyle('.CLASS_NAME', style) : '')\n  + nested.map(([target, style]) =>\n    selectorToStyle('.CLASS_NAME' + target, style)\n  ).join('')\n\n  + atRules.map(([atRule, style]) =>\n    atRule + '{' + selectorToStyle('.CLASS_NAME', style) + '}'\n  ).join('')\n}\n\nexport function selectorToStyle(selector, style) {\n  return selector + '{'\n    + stylesToCss((typeof style === 'string' ? stringToObject(style) : style))\n    + '}'\n}\n\nexport function stylesToCss(style) {\n  style = sanitize(style)\n  return Object.keys(style).map(k => propToString(style, k)).join('')\n}\n\nexport function sanitize(styles) {\n  return Object.keys(styles).reduce((acc, key) => {\n    const value = styles[key]\n\n    if (!value && value !== 0 && value !== '')\n      return acc\n\n    if (key === 'content' && value.charAt(0) !== '\"')\n      acc[key] = '\"' + value + '\"'\n    else\n      acc[key in vendorMap ? vendorMap[key] : key] = addPx(key, value)\n\n    return acc\n  }, {})\n}\n\nfunction stringToObject(string) {\n  return string.split('\\n').reduce((acc, line) => {\n    const tokens = line.replace(';', '').trim().split(/[: ]/)\n    if (tokens.length > 1) {\n      const key = hyphenToCamelCase(tokens.shift().trim())\n      acc[shorts[key] || key] = addPx(shorts[key] || key, tokens.join(' ').trim())\n    }\n    return acc\n  }, {})\n}\n\nexport function readClasses(sheet) {\n  throw new Error('not implemented')\n}\n\nfunction propToString(style, k) {\n  return (vendorRegex.test(k) ? '-' : '')\n  + camelCaseToHyphen(k) + ':' + style[k] + ';'\n}\n\nfunction addPx(key, value) {\n  const result = value + (!isNaN(value) && pxProperties.indexOf(key) > -1 ? 'px' : '')\n  return result\n}\n","import { objectToCss, getStyleSheetText } from './utils'\n\nconst styleSheet = document.createElement('style')\nconst classes = Object.create(null, {})\n\nlet prefix = ''\nlet count = 0\nlet scheduled = false\n\nconst Promise = window.Promise || {\n  resolve: () => ({ then: (fn) => setTimeout(fn, 0) })\n}\n\ndocument.head.appendChild(styleSheet)\n\nexport const classPrefix = 'b' + ('000' + ((Math.random() * 46656) | 0).toString(36)).slice(-3) +\n                    ('000' + ((Math.random() * 46656) | 0).toString(36)).slice(-3)\n\nexport function forceUpdate() {\n  scheduled = false\n\n  styleSheet.textContent = prefix + getStyleSheetText(classes)\n}\n\nexport function prepend(string) {\n  prefix += String(string)\n  scheduleUpdate()\n}\n\nexport function createClass(style) {\n  const css = objectToCss(style)\n\n  if (css in classes) // Consider caching json for performance\n    return classes[css]\n\n  const className = classPrefix + (++count)\n\n  classes[css] = className\n\n  scheduleUpdate()\n\n  return className\n}\n\nfunction scheduleUpdate() {\n  if (scheduled)\n    return\n\n  scheduled = true\n  Promise.resolve().then(forceUpdate)\n}\n\nexport function _reset() {\n  count = 0\n  Object.keys(classes).map(css => {\n    delete classes[css]\n  })\n}\n","import keyframes from './keyframes'\nimport pseudos from './pseudos'\n\nimport {\n  forceUpdate,\n  createClass,\n  prepend\n} from './sheet'\n\nimport {\n  hyphenToCamelCase,\n  selectorToStyle,\n  lowercaseFirst,\n  cssProperties,\n  addProperty,\n  readClasses,\n  vendorRegex,\n  vendorMap,\n  assign,\n  short,\n  parse\n} from './utils'\n\nfunction bss(input, value) {\n  assign(bss.style, parse.apply(null, arguments))\n  return chain(bss)\n}\n\nbss.style = {}\n\nbss.toString = function() {\n  return '.' + this.class\n}\n\nbss.forceUpdate = forceUpdate\nbss.$keyframes = keyframes\nbss.prepend = prepend\nbss.helper = helper\nbss.css = css\n\nfunction chain(instance) {\n  if (instance !== bss)\n    return instance\n\n  const newInstance = Object.create(bss, { style: { value: bss.style } })\n  bss.style = {}\n  return newInstance\n}\n\ncssProperties.forEach(prop => {\n  if (vendorRegex.test(prop)) {\n    const unprefixed = lowercaseFirst(prop.replace(vendorRegex, '$2'))\n    if (cssProperties.indexOf(unprefixed) === -1) {\n      vendorMap[unprefixed] = prop\n      bss[unprefixed] = bss[short(unprefixed)] = setter(prop)\n      return\n    }\n  }\n\n  bss[prop] = bss[short(prop)] = setter(prop)\n})\n\nObject.defineProperty(bss, 'class', {\n  get: function() {\n    return createClass(this.style)\n  }\n})\n\nbss.$media = function(value, b) {\n  this.style['@media ' + value] = parse(b)\n  return chain(this)\n}\n\nbss.$nest = function(value, b) {\n  this.style[(value.charAt(0) === ':' ? '' : ' ') + value] = parse(b)\n  return chain(this)\n}\n\npseudos.forEach(name =>\n  bss['$' + hyphenToCamelCase(name)] = function(value, b) {\n    this.style[':' + name + (b ? '(' + value + ')' : '')] = parse(b || value)\n    return chain(this)\n  }\n)\n\nfunction setter(prop) {\n  return function CssProperty(value) {\n    addProperty(this.style, prop, value)\n    return chain(this)\n  }\n}\n\nfunction css(selector, style) {\n  prepend(selectorToStyle(selector, parse(style)))\n}\n\nfunction helper(name, styling) {\n  if (arguments.length === 1)\n    return readClasses(name)\n\n  if (typeof styling === 'object') {\n    delete bss[name] // Needed to avoid weird get calls in chrome\n    Object.defineProperty(bss, name, {\n      get: function() {\n        assign(this.style, parse(styling))\n        return chain(this)\n      }\n    })\n    return\n  }\n\n  bss[name] = function Helper() {\n    const result = styling.apply(null, arguments)\n    assign(this.style, result.style)\n    return chain(this)\n  }\n}\n\nbss.helper('$animate', (value, props) =>\n  bss.animation(bss.$keyframes(props) + ' ' + value)\n)\n\nexport default bss\n","export default {\n  ai : 'alignItems',\n  b  : 'bottom',\n  bc : 'backgroundColor',\n  br : 'borderRadius',\n  bs : 'boxShadow',\n  c  : 'color',\n  d  : 'display',\n  f  : 'float',\n  fd : 'flexDirection',\n  ff : 'fontFamily',\n  fs : 'fontSize',\n  h  : 'height',\n  jc : 'justifyContent',\n  l  : 'left',\n  m  : 'margin',\n  mb : 'marginBottom',\n  ml : 'marginLeft',\n  mr : 'marginRight',\n  mt : 'marginTop',\n  o  : 'opacity',\n  p  : 'padding',\n  pb : 'paddingBottom',\n  pl : 'paddingLeft',\n  pr : 'paddingRight',\n  pt : 'paddingTop',\n  r  : 'right',\n  t  : 'top',\n  ta : 'textAlign',\n  td : 'textDecoration',\n  tt : 'textTransform',\n  w  : 'width',\n}\n","import { selectorToStyle } from './utils'\nimport { prepend, classPrefix } from './sheet'\n\nlet count = 0\nconst keyframeCache = {}\n\nexport default function(props) {\n  const content = Object.keys(props).map(key =>\n    selectorToStyle(key, props[key].style || props[key])\n  ).join('')\n\n  if (content in keyframeCache)\n    return keyframeCache[content]\n\n  const name = classPrefix + ++count\n  keyframeCache[content] = name\n  prepend('@keyframes ' + name + '{' + content + '}')\n\n  return name\n}\n","export default [\n  'active',\n  'any',\n  'checked',\n  'default',\n  'disabled',\n  'empty',\n  'enabled',\n  'first',\n  'first-child',\n  'first-of-type',\n  'fullscreen',\n  'focus',\n  'hover',\n  'indeterminate',\n  'in-range',\n  'invalid',\n  'last-child',\n  'last-of-type',\n  'left',\n  'link',\n  'only-child',\n  'only-of-type',\n  'optional',\n  'out-of-range',\n  'read-only',\n  'read-write',\n  'required',\n  'right',\n  'root',\n  'scope',\n  'target',\n  'valid',\n  'visited',\n\n  // With value\n  'dir',\n  'lang',\n  'not',\n  'nth-child',\n  'nth-last-child',\n  'nth-last-of-type',\n  'nth-of-type',\n\n  // Elements\n  'after',\n  'before',\n  'first-letter',\n  'first-line',\n  'selection',\n  'backdrop',\n  'placeholder',\n  'marker',\n  'spelling-error',\n  'grammar-error'\n]\n"],"names":["findWidth","obj","hasOwnProperty","Object","getPrototypeOf","endsWith","str","suffix","indexOf","length","parse","input","value","stringToObject","Array","isArray","raw","arguments","String","apply","style","addProperty","key","addPx","lowercaseFirst","string","charAt","toLowerCase","slice","assign","obj2","const","hyphenToCamelCase","hyphen","replace","match","toUpperCase","camelCaseToHyphen","camelCase","initials","join","short","prop","acronym","popular","shorts","getStyleSheetText","classes","keys","sort","map","objectToCss","atRules","nested","notEmpty","forEach","item","push","selectorToStyle","ref","selector","stylesToCss","sanitize","k","propToString","styles","reduce","acc","vendorMap","split","line","tokens","trim","shift","readClasses","sheet","Error","vendorRegex","test","isNaN","pxProperties","forceUpdate","scheduled","styleSheet","textContent","prefix","prepend","scheduleUpdate","createClass","css","className","classPrefix","count","Promise","resolve","then","bss","chain","instance","newInstance","create","setter","this","ai","b","bc","br","bs","c","d","f","fd","ff","fs","h","jc","l","m","mb","ml","mr","mt","o","p","pb","pl","pr","pt","r","t","ta","td","tt","w","cssProperties","document","documentElement","filter","edge","window","navigator","userAgent","el","createElement","setProperty","err","getPropertyValue","concat","fn","setTimeout","head","appendChild","Math","random","toString","keyframeCache","class","$keyframes","props","content","name","helper","styling","defineProperty","get","result","unprefixed","$media","$nest","pseudos","animation"],"mappings":"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"}